<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  </head>
  
  <body onload="document.getElementById('player').src = ''">
  
  <div align="center">
  <iframe id="player" width="853" height="480" src="" frameborder="1" allowfullscreen>
  </iframe>
  <br>
  <br>
  <input type="text"  value="" id="queryText" size="80">&nbsp;
  <button type="button" onclick="searchQ()">Search 8 videos</button>
  <br>
  <div id='list1' style="width:750px;height:250px;overflow:auto;
  text-align:left;background-color:#eee;line-height:150%;padding:10px">
  </div>
  <br>
  </div>
 
 <script>
 var maxRes = 8; 
   
var val1 = 'AIzaSyAFV5dB';
var val2 = '0CKCkb7L3ddrZYVL9bxr4lB31s';
var val = val1 + '-' + val2;
   
 function searchQ(){
      query = document.getElementById('queryText').value;
      email = 'https://www.googleapis.com/youtube/v3/search?part=snippet' +'&maxResults='+ maxRes +
      '&order=date&q='+ query + '&key=' + val +
      '&callback=myPlan';
      var oldsearchS = document.getElementById('searchS');
      if(oldsearchS){
            oldsearchS.parentNode.removeChild(oldsearchS);
      }
      var s = document.createElement('script');
      s.setAttribute('src', email);
      s.setAttribute('id','searchS');
      s.setAttribute('type','text/javascript');
      document.getElementsByTagName('head')[0].appendChild(s);
  }
    
  function myPlan(response){
      var stList = '<table id="res1" border="1" cellspacing="1" width="100%"><tbody>'; 
      for (var i=0; i<response.items.length;i++){
        
          var vid = response.items[i].id.videoId; 
          var tit = response.items[i].snippet.title;
          var videodatetime = response.items[i].snippet.publishedAt; // date time published
          var videodate = videodatetime.substr(0, 10);
        
          if(typeof vid != 'undefined'){    
              stList += '<tr><td style="width:80px;">'+
                '<a class="show" href="#" title="'+ vid + '" onclick="playVid(this);'+
                ' return false">'+
                '<img  width="80" height="60" src="http://img.youtube.com/vi/'+ 
                vid +'/default.jpg"></a></td>'+
                '<td style="vertical-align:top"><b>'+(i+1)+'</b>-'+ vid + ' ' + 'Published:' + videodate +'</td></tr>';
          }
      }
      document.getElementById('list1').innerHTML = stList + '</tbody></table>';
  }
  
  function playVid(thi){
      var st = 'https://www.youtube.com/embed/'+thi.title+'?autoplay=1';
      //var st = 'https://www.youtube.com/embed/'+thi.vid+'?autoplay=1';
      document.getElementById('player').src = st; 
  }
  </script>
  
  </body></html>
